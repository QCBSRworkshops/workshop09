<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Quantifying data (dis)similarity | Workshop 9: Multivariate Analyses in R</title>
  <meta name="description" content="Multivariate Analyses in R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Quantifying data (dis)similarity | Workshop 9: Multivariate Analyses in R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://github.com/qcbsRworkshops/" />
  <meta property="og:image" content="https://github.com/qcbsRworkshops/assets/images/logo/csbq_logo_accueil.png" />
  <meta property="og:description" content="Multivariate Analyses in R" />
  <meta name="github-repo" content="qcbsRworkshops/workshop09" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Quantifying data (dis)similarity | Workshop 9: Multivariate Analyses in R" />
  
  <meta name="twitter:description" content="Multivariate Analyses in R" />
  <meta name="twitter:image" content="https://github.com/qcbsRworkshops/assets/images/logo/csbq_logo_accueil.png" />

<meta name="author" content="Developed and maintained by the contributors of the QCBS R Workshop Series" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/images/favicon.ico" type="image/x-icon" />
<link rel="prev" href="data-dissimilarity.html"/>
<link rel="next" href="clustering.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets/qcbs-style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="assets/images/csbq_logo_gray_accueil.png"></a></li>
<link rel="icon" type="image/png" href="images/favicon.ico"/>

<li class="divider"></li>
<li class="part"><span><b>QCBS R Workshop Series</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#code-of-conduct"><i class="fa fa-check"></i><b>0.1</b> Code of conduct</a><ul>
<li class="chapter" data-level="0.1.1" data-path="index.html"><a href="index.html#expected-behaviour"><i class="fa fa-check"></i><b>0.1.1</b> Expected behaviour</a></li>
<li class="chapter" data-level="0.1.2" data-path="index.html"><a href="index.html#unacceptable-behaviour"><i class="fa fa-check"></i><b>0.1.2</b> Unacceptable behaviour</a></li>
</ul></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i><b>0.2</b> Contributors</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#contributing"><i class="fa fa-check"></i><b>0.3</b> Contributing</a></li>
</ul></li>
<li class="part"><span><b>Multivariate Analyses in <code>R</code></b></span></li>
<li class="chapter" data-level="1" data-path="learning-objectives.html"><a href="learning-objectives.html"><i class="fa fa-check"></i><b>1</b> Learning objectives</a></li>
<li class="chapter" data-level="2" data-path="preparing-for-the-workshop.html"><a href="preparing-for-the-workshop.html"><i class="fa fa-check"></i><b>2</b> Preparing for the workshop</a></li>
<li class="chapter" data-level="3" data-path="what-is-ordination.html"><a href="what-is-ordination.html"><i class="fa fa-check"></i><b>3</b> What is ordination?</a></li>
<li class="chapter" data-level="4" data-path="exploring-the-dataset.html"><a href="exploring-the-dataset.html"><i class="fa fa-check"></i><b>4</b> Exploring the dataset</a><ul>
<li class="chapter" data-level="4.1" data-path="exploring-the-dataset.html"><a href="exploring-the-dataset.html#species-data"><i class="fa fa-check"></i><b>4.1</b> Species data</a></li>
<li class="chapter" data-level="4.2" data-path="exploring-the-dataset.html"><a href="exploring-the-dataset.html#environmental-data"><i class="fa fa-check"></i><b>4.2</b> Environmental data</a></li>
</ul></li>
<li class="part"><span><b>Measures of association</b></span></li>
<li class="chapter" data-level="5" data-path="data-dissimilarity.html"><a href="data-dissimilarity.html"><i class="fa fa-check"></i><b>5</b> Data (dis)similarity</a></li>
<li class="chapter" data-level="6" data-path="quantifying-data-dissimilarity.html"><a href="quantifying-data-dissimilarity.html"><i class="fa fa-check"></i><b>6</b> Quantifying data (dis)similarity</a><ul>
<li class="chapter" data-level="6.1" data-path="quantifying-data-dissimilarity.html"><a href="quantifying-data-dissimilarity.html#transformations-of-community-composition-data"><i class="fa fa-check"></i><b>6.1</b> Transformations of community composition data</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>7</b> Clustering</a></li>
<li class="part"><span><b>Unconstrained Ordination</b></span></li>
<li class="chapter" data-level="8" data-path="what-does-unconstrained-mean.html"><a href="what-does-unconstrained-mean.html"><i class="fa fa-check"></i><b>8</b> What does “unconstrained” mean?</a></li>
<li class="chapter" data-level="9" data-path="principal-component-analysis.html"><a href="principal-component-analysis.html"><i class="fa fa-check"></i><b>9</b> Principal Component Analysis</a></li>
<li class="chapter" data-level="10" data-path="correspondence-analysis.html"><a href="correspondence-analysis.html"><i class="fa fa-check"></i><b>10</b> Correspondence Analysis</a></li>
<li class="chapter" data-level="11" data-path="principal-coordinates-analysis.html"><a href="principal-coordinates-analysis.html"><i class="fa fa-check"></i><b>11</b> Principal Coordinates Analysis</a></li>
<li class="chapter" data-level="12" data-path="nonmetric-multidimensional-scaling.html"><a href="nonmetric-multidimensional-scaling.html"><i class="fa fa-check"></i><b>12</b> Nonmetric MultiDimensional Scaling</a></li>
<li class="part"><span><b>Final considerations</b></span></li>
<li class="chapter" data-level="13" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>13</b> Summary</a></li>
<li class="chapter" data-level="14" data-path="additional-resources.html"><a href="additional-resources.html"><i class="fa fa-check"></i><b>14</b> Additional resources</a></li>
<li class="chapter" data-level="15" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>15</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/qcbsRworkshops" target="blank">QCBS R Workshop Series</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Workshop 9: Multivariate Analyses in <code>R</code></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!------------------------ Hero Image Container --------------------------> 

<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10.0,initial-scale=1.0">
  <script src="https://kit.fontawesome.com/6a26f47516.js"></script>
  <script src="assets/qcbs-hideOutput.js"></script>
  <link href="assets/qcbs-style.css" rel="stylesheet">
</head>



<div class="hero-image-container"> 
  <img class= "hero-image" src="assets/images/jean-philippe-delberghe-75xPHEQBmvA-unsplash_hero_image.jpg">
</div>
<div id="quantifying-data-dissimilarity" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Quantifying data (dis)similarity</h1>
<p><strong>Quantitative species data</strong> We can use the vegdist() function to
compute dissimilarity indices for community composition data. These can
then be visualized as a matrix if desired.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="quantifying-data-dissimilarity.html#cb11-1"></a>spe.db &lt;-<span class="st"> </span><span class="kw">vegdist</span>(spe, <span class="dt">method =</span> <span class="st">&quot;bray&quot;</span>)  <span class="co"># &#39;bray&#39; with presence-absence data is Sorensen dissimilarity </span></span>
<span id="cb11-2"><a href="quantifying-data-dissimilarity.html#cb11-2"></a>spe.dj &lt;-<span class="st"> </span><span class="kw">vegdist</span>(spe, <span class="dt">method =</span> <span class="st">&quot;jac&quot;</span>)  <span class="co"># Jaccard dissimilarity</span></span>
<span id="cb11-3"><a href="quantifying-data-dissimilarity.html#cb11-3"></a>spe.dg &lt;-<span class="st"> </span><span class="kw">vegdist</span>(spe, <span class="dt">method =</span> <span class="st">&quot;gower&quot;</span>)  <span class="co"># Gower dissimilarity </span></span>
<span id="cb11-4"><a href="quantifying-data-dissimilarity.html#cb11-4"></a>spe.db &lt;-<span class="st"> </span><span class="kw">as.matrix</span>(spe.db)  <span class="co">#Put in matrix form (can visualize, write to .csv etc)</span></span></code></pre></div>
<p>A condensed version of the spe.db matrix where the numbers represent the
distance(dissimilarity) between the first 3 species in DoubsSpe would
look like this:</p>
<table>
<thead>
<tr class="header">
<th></th>
<th align="left">Species 1</th>
<th align="left">Species 2</th>
<th align="left">Species 3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Species 1</td>
<td align="left">0.0</td>
<td align="left">0.6</td>
<td align="left">0.68</td>
</tr>
<tr class="even">
<td>Species 2</td>
<td align="left">0.6</td>
<td align="left">0.0</td>
<td align="left">0.14</td>
</tr>
<tr class="odd">
<td>Species 3</td>
<td align="left">0.68</td>
<td align="left">0.14</td>
<td align="left">0.0</td>
</tr>
</tbody>
</table>
<p>You can see that when comparing a species to itself (e.g. Species 1 to
Species 1), the distance = 0, because species 1 is like itself and
distance is maximum when the species compared are 100% different.</p>
<p>These same distance measures can be calculated from presence-absence
data by setting binary=TRUE in the vegdist() function. This will give
slightly different distance measures.</p>
<p>You can also create graphical depictions of these association matrices
using a function called coldiss. &lt;hidden&gt; This function can be sourced
using the script coldiss.R:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="quantifying-data-dissimilarity.html#cb12-1"></a><span class="kw">windows</span>()</span>
<span id="cb12-2"><a href="quantifying-data-dissimilarity.html#cb12-2"></a><span class="kw">coldiss</span>(spe.db, <span class="dt">byrank =</span> <span class="ot">FALSE</span>, <span class="dt">diag =</span> <span class="ot">TRUE</span>)  <span class="co"># Heat map of Bray-Curtis dissimilarity</span></span>
<span id="cb12-3"><a href="quantifying-data-dissimilarity.html#cb12-3"></a><span class="kw">windows</span>()</span>
<span id="cb12-4"><a href="quantifying-data-dissimilarity.html#cb12-4"></a><span class="kw">coldiss</span>(spe.dj, <span class="dt">byrank =</span> <span class="ot">FALSE</span>, <span class="dt">diag =</span> <span class="ot">TRUE</span>)  <span class="co"># Heat map of Jaccard dissimilarity</span></span>
<span id="cb12-5"><a href="quantifying-data-dissimilarity.html#cb12-5"></a><span class="kw">windows</span>()</span>
<span id="cb12-6"><a href="quantifying-data-dissimilarity.html#cb12-6"></a><span class="kw">coldiss</span>(spe.dg, <span class="dt">byrank =</span> <span class="ot">FALSE</span>, <span class="dt">diag =</span> <span class="ot">TRUE</span>)  <span class="co"># Heat map of Gower dissimilarity</span></span></code></pre></div>
<p><img src="/coldiss_Bray.png" width="800" /></p>
<p>The figure shows a dissimilarity matrix which mirrors what you would see
if you exported the matrix or viewed it within the R console. The ‘hot’
colour (purple) shows areas of high dissimilarity. &lt;/hidden&gt;</p>
<p><strong>Quantitative environmental data</strong> Let’s look at <em>associations</em> between
environmental variables (also known as Q mode):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="quantifying-data-dissimilarity.html#cb13-1"></a><span class="st">`</span><span class="dt">?</span><span class="st">`</span>(dist  <span class="co"># this function also compute dissimilarity matrix</span></span>
<span id="cb13-2"><a href="quantifying-data-dissimilarity.html#cb13-2"></a>)</span>
<span id="cb13-3"><a href="quantifying-data-dissimilarity.html#cb13-3"></a>env.de &lt;-<span class="st"> </span><span class="kw">dist</span>(env.z, <span class="dt">method =</span> <span class="st">&quot;euclidean&quot;</span>)  <span class="co"># euclidean distance matrix of the standardized environmental variables </span></span>
<span id="cb13-4"><a href="quantifying-data-dissimilarity.html#cb13-4"></a><span class="kw">windows</span>()  <span class="co">#Creates a separate graphical window</span></span>
<span id="cb13-5"><a href="quantifying-data-dissimilarity.html#cb13-5"></a><span class="kw">coldiss</span>(env.de, <span class="dt">diag =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>We can then look at the <em>dependence</em> between environmental variables
(also known as R mode):</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="quantifying-data-dissimilarity.html#cb14-1"></a>(env.pearson &lt;-<span class="st"> </span><span class="kw">cor</span>(env))  <span class="co"># Pearson r linear correlation</span></span>
<span id="cb14-2"><a href="quantifying-data-dissimilarity.html#cb14-2"></a><span class="kw">round</span>(env.pearson, <span class="dv">2</span>)  <span class="co">#Rounds the coefficients to 2 decimal points </span></span>
<span id="cb14-3"><a href="quantifying-data-dissimilarity.html#cb14-3"></a>(env.ken &lt;-<span class="st"> </span><span class="kw">cor</span>(env, <span class="dt">method =</span> <span class="st">&quot;kendall&quot;</span>))  <span class="co"># Kendall tau rank correlation</span></span>
<span id="cb14-4"><a href="quantifying-data-dissimilarity.html#cb14-4"></a><span class="kw">round</span>(env.ken, <span class="dv">2</span>)</span></code></pre></div>
<p>The Pearson correlation measures the linear correlation between two
variables. The Kendall tau is a rank correlation which means that it
quantifies the relationship between two descriptors or variables when
the data are ordered within each variable.</p>
<p>In some cases, there may be mixed types of environmental variables. Q
mode can still be used to find associations between these environmental
variables. We’ll do this by first creating an example dataframe:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="quantifying-data-dissimilarity.html#cb15-1"></a>var.g1 &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">30</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb15-2"><a href="quantifying-data-dissimilarity.html#cb15-2"></a>var.g2 &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">30</span>, <span class="dv">0</span>, <span class="dv">5</span>)</span>
<span id="cb15-3"><a href="quantifying-data-dissimilarity.html#cb15-3"></a>var.g3 &lt;-<span class="st"> </span><span class="kw">gl</span>(<span class="dv">3</span>, <span class="dv">10</span>)</span>
<span id="cb15-4"><a href="quantifying-data-dissimilarity.html#cb15-4"></a>var.g4 &lt;-<span class="st"> </span><span class="kw">gl</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">30</span>)</span>
<span id="cb15-5"><a href="quantifying-data-dissimilarity.html#cb15-5"></a>(dat2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(var.g1, var.g2, var.g3, var.g4))</span>
<span id="cb15-6"><a href="quantifying-data-dissimilarity.html#cb15-6"></a><span class="kw">str</span>(dat2)</span>
<span id="cb15-7"><a href="quantifying-data-dissimilarity.html#cb15-7"></a><span class="kw">summary</span>(dat2)</span></code></pre></div>
<p>A dissimilarity matrix can be generated for these mixed variables using
the Gower dissimilarity matrix:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="quantifying-data-dissimilarity.html#cb16-1"></a><span class="st">`</span><span class="dt">?</span><span class="st">`</span>(daisy  <span class="co">#This function can handle NAs in the data</span></span>
<span id="cb16-2"><a href="quantifying-data-dissimilarity.html#cb16-2"></a>)</span>
<span id="cb16-3"><a href="quantifying-data-dissimilarity.html#cb16-3"></a>(dat2.dg &lt;-<span class="st"> </span><span class="kw">daisy</span>(dat2, <span class="dt">metric =</span> <span class="st">&quot;gower&quot;</span>))</span>
<span id="cb16-4"><a href="quantifying-data-dissimilarity.html#cb16-4"></a><span class="kw">coldiss</span>(dat2.dg)</span></code></pre></div>
<p><strong>Challenge 1 - Introductory</strong> Discuss with your neighbour: How can we
tell how similar objects are when we have multivariate data? Make a list
of all your suggestions.</p>
<p><strong>Challenge 1 - Introductory Solution</strong> &lt;hidden&gt; Discuss as a group.
&lt;/hidden&gt;</p>
<p><strong>Challenge 1 - Advanced</strong> Calculate the Bray-Curtis and the Gower
dissimilarity of species abundance CHA, TRU and VAI for sites 1, 2 and 3
(using the “spe” and “env” dataframes) <em>without using the decostand()
function.</em></p>
<p><strong>Challenge 1 - Advanced Solution</strong> &lt;hidden&gt;</p>
<p>First, it is helpful to know the formula for Bray-Curtis dissimilarity
Bray-Curtis dissimilarity : d<span class="math display">\[jk\]</span> = (sum abs(x<span class="math display">\[ij\]</span>-x<span class="math display">\[ik\]</span>))/(sum
(x<span class="math display">\[ij\]</span>+x<span class="math display">\[ik\]</span>))</p>
<p>Next, subset the species data so that only sites 1, 2 are included and
only the species CHA, TRU and VAI</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="quantifying-data-dissimilarity.html#cb17-1"></a>spe.challenge &lt;-<span class="st"> </span>spe[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>]  <span class="co">#”[1:3,” refers to rows 1 to 3 while “,1:3]” refers to the first 3 species columns (in #this case the three variables of interest)</span></span></code></pre></div>
<p>Determine total species abundance for each site of interest (sum of the
3 rows). This will be for the denominator in the above equation.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="quantifying-data-dissimilarity.html#cb18-1"></a>(Abund.s1 &lt;-<span class="st"> </span><span class="kw">sum</span>(spe.challenge[<span class="dv">1</span>, ]))</span>
<span id="cb18-2"><a href="quantifying-data-dissimilarity.html#cb18-2"></a>(Abund.s2 &lt;-<span class="st"> </span><span class="kw">sum</span>(spe.challenge[<span class="dv">2</span>, ]))</span>
<span id="cb18-3"><a href="quantifying-data-dissimilarity.html#cb18-3"></a>(Abund.s3 &lt;-<span class="st"> </span><span class="kw">sum</span>(spe.challenge[<span class="dv">3</span>, ]))</span>
<span id="cb18-4"><a href="quantifying-data-dissimilarity.html#cb18-4"></a><span class="co"># () around code will cause output to print right away in</span></span>
<span id="cb18-5"><a href="quantifying-data-dissimilarity.html#cb18-5"></a><span class="co"># console</span></span></code></pre></div>
<p>Now calculate the difference in species abundances for each pair of
sites. For example, what is the difference between the abundance of CHA
and TRU in site 1? You need to calculate the following differences: CHA
and TRU site 1 CHA and VAI site 1 TRU and VAI site 1 CHA and TRU site 2
CHA and VAI site 2 TRU and VAI site 2 CHA and TRU site 3 CHA and VAI
site 3 TRU and VAI site 3</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="quantifying-data-dissimilarity.html#cb19-1"></a>Spec.s1s2 &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb19-2"><a href="quantifying-data-dissimilarity.html#cb19-2"></a>Spec.s1s3 &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb19-3"><a href="quantifying-data-dissimilarity.html#cb19-3"></a>Spec.s2s3 &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb19-4"><a href="quantifying-data-dissimilarity.html#cb19-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) {</span>
<span id="cb19-5"><a href="quantifying-data-dissimilarity.html#cb19-5"></a>    Spec.s1s2 &lt;-<span class="st"> </span>Spec.s1s2 <span class="op">+</span><span class="st"> </span><span class="kw">abs</span>(<span class="kw">sum</span>(spe.challenge[<span class="dv">1</span>, i] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">2</span>, </span>
<span id="cb19-6"><a href="quantifying-data-dissimilarity.html#cb19-6"></a>        i]))</span>
<span id="cb19-7"><a href="quantifying-data-dissimilarity.html#cb19-7"></a>    Spec.s1s3 &lt;-<span class="st"> </span>Spec.s1s3 <span class="op">+</span><span class="st"> </span><span class="kw">abs</span>(<span class="kw">sum</span>(spe.challenge[<span class="dv">1</span>, i] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">3</span>, </span>
<span id="cb19-8"><a href="quantifying-data-dissimilarity.html#cb19-8"></a>        i]))</span>
<span id="cb19-9"><a href="quantifying-data-dissimilarity.html#cb19-9"></a>    Spec.s2s3 &lt;-<span class="st"> </span>Spec.s2s3 <span class="op">+</span><span class="st"> </span><span class="kw">abs</span>(<span class="kw">sum</span>(spe.challenge[<span class="dv">2</span>, i] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">3</span>, </span>
<span id="cb19-10"><a href="quantifying-data-dissimilarity.html#cb19-10"></a>        i]))</span>
<span id="cb19-11"><a href="quantifying-data-dissimilarity.html#cb19-11"></a>}</span></code></pre></div>
<p>Now take the differences you have calculated as the numerator in the
equation for Bray-Curtis dissimilarity and the total species abundance
that you already calculated as the denominator.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="quantifying-data-dissimilarity.html#cb20-1"></a>(db.s1s2 &lt;-<span class="st"> </span>Spec.s1s2<span class="op">/</span>(Abund.s1 <span class="op">+</span><span class="st"> </span>Abund.s2))  <span class="co">#Site 1 compared to site 2</span></span>
<span id="cb20-2"><a href="quantifying-data-dissimilarity.html#cb20-2"></a>(db.s1s3 &lt;-<span class="st"> </span>Spec.s1s3<span class="op">/</span>(Abund.s1 <span class="op">+</span><span class="st"> </span>Abund.s3))  <span class="co">#Site 1 compared to site 3</span></span>
<span id="cb20-3"><a href="quantifying-data-dissimilarity.html#cb20-3"></a>(db.s2s3 &lt;-<span class="st"> </span>Spec.s2s3<span class="op">/</span>(Abund.s2 <span class="op">+</span><span class="st"> </span>Abund.s3))  <span class="co">#Site 2 compared to site 3 </span></span></code></pre></div>
<p>You should find values of 0.5 for site 1 to site 2, 0.538 for site 1 to
site 3 and 0.053 for site 2 to 3.</p>
<p>Check your manual results with what you would find using the function
vegdist() with the Bray-Curtis method:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="quantifying-data-dissimilarity.html#cb21-1"></a>(spe.db.challenge &lt;-<span class="st"> </span><span class="kw">vegdist</span>(spe.challenge, <span class="dt">method =</span> <span class="st">&quot;bray&quot;</span>))</span></code></pre></div>
<p>A matrix looking like this is produced, which should be the same as your
manual calculations:</p>
<table>
<thead>
<tr class="header">
<th></th>
<th align="left">Site 1</th>
<th align="left">Site 2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Site 2</td>
<td align="left">0.5</td>
<td align="left">--</td>
</tr>
<tr class="even">
<td>Site 3</td>
<td align="left">0.538</td>
<td align="left">0.0526</td>
</tr>
</tbody>
</table>
<p>For the Gower dissimilarity, proceed in the same way but use the
appropriate equation: Gower dissimilarity : d<span class="math display">\[jk\]</span> = (1/M)
sum(abs(x<span class="math display">\[ij\]</span>-x<span class="math display">\[ik\]</span>)/(max(x<span class="math display">\[i\]</span>)-min(x<span class="math display">\[i\]</span>)))</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="quantifying-data-dissimilarity.html#cb22-1"></a><span class="co"># Calculate the number of columns in your dataset</span></span>
<span id="cb22-2"><a href="quantifying-data-dissimilarity.html#cb22-2"></a>M &lt;-<span class="st"> </span><span class="kw">ncol</span>(spe.challenge)</span>
<span id="cb22-3"><a href="quantifying-data-dissimilarity.html#cb22-3"></a></span>
<span id="cb22-4"><a href="quantifying-data-dissimilarity.html#cb22-4"></a><span class="co"># Calculate the species abundance differences between pairs</span></span>
<span id="cb22-5"><a href="quantifying-data-dissimilarity.html#cb22-5"></a><span class="co"># of sites for each species</span></span>
<span id="cb22-6"><a href="quantifying-data-dissimilarity.html#cb22-6"></a>Spe1.s1s2 &lt;-<span class="st"> </span><span class="kw">abs</span>(spe.challenge[<span class="dv">1</span>, <span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">2</span>, <span class="dv">1</span>])</span>
<span id="cb22-7"><a href="quantifying-data-dissimilarity.html#cb22-7"></a>Spe2.s1s2 &lt;-<span class="st"> </span><span class="kw">abs</span>(spe.challenge[<span class="dv">1</span>, <span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">2</span>, <span class="dv">2</span>])</span>
<span id="cb22-8"><a href="quantifying-data-dissimilarity.html#cb22-8"></a>Spe3.s1s2 &lt;-<span class="st"> </span><span class="kw">abs</span>(spe.challenge[<span class="dv">1</span>, <span class="dv">3</span>] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb22-9"><a href="quantifying-data-dissimilarity.html#cb22-9"></a>Spe1.s1s3 &lt;-<span class="st"> </span><span class="kw">abs</span>(spe.challenge[<span class="dv">1</span>, <span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">3</span>, <span class="dv">1</span>])</span>
<span id="cb22-10"><a href="quantifying-data-dissimilarity.html#cb22-10"></a>Spe2.s1s3 &lt;-<span class="st"> </span><span class="kw">abs</span>(spe.challenge[<span class="dv">1</span>, <span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">3</span>, <span class="dv">2</span>])</span>
<span id="cb22-11"><a href="quantifying-data-dissimilarity.html#cb22-11"></a>Spe3.s1s3 &lt;-<span class="st"> </span><span class="kw">abs</span>(spe.challenge[<span class="dv">1</span>, <span class="dv">3</span>] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">3</span>, <span class="dv">3</span>])</span>
<span id="cb22-12"><a href="quantifying-data-dissimilarity.html#cb22-12"></a>Spe1.s2s3 &lt;-<span class="st"> </span><span class="kw">abs</span>(spe.challenge[<span class="dv">2</span>, <span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">3</span>, <span class="dv">1</span>])</span>
<span id="cb22-13"><a href="quantifying-data-dissimilarity.html#cb22-13"></a>Spe2.s2s3 &lt;-<span class="st"> </span><span class="kw">abs</span>(spe.challenge[<span class="dv">2</span>, <span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">3</span>, <span class="dv">2</span>])</span>
<span id="cb22-14"><a href="quantifying-data-dissimilarity.html#cb22-14"></a>Spe3.s2s3 &lt;-<span class="st"> </span><span class="kw">abs</span>(spe.challenge[<span class="dv">2</span>, <span class="dv">3</span>] <span class="op">-</span><span class="st"> </span>spe.challenge[<span class="dv">3</span>, <span class="dv">3</span>])</span>
<span id="cb22-15"><a href="quantifying-data-dissimilarity.html#cb22-15"></a></span>
<span id="cb22-16"><a href="quantifying-data-dissimilarity.html#cb22-16"></a><span class="co"># Calculate the range of each species abundance between sites</span></span>
<span id="cb22-17"><a href="quantifying-data-dissimilarity.html#cb22-17"></a>Range.spe1 &lt;-<span class="st"> </span><span class="kw">max</span>(spe.challenge[, <span class="dv">1</span>]) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(spe.challenge[, <span class="dv">1</span>])</span>
<span id="cb22-18"><a href="quantifying-data-dissimilarity.html#cb22-18"></a>Range.spe2 &lt;-<span class="st"> </span><span class="kw">max</span>(spe.challenge[, <span class="dv">2</span>]) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(spe.challenge[, <span class="dv">2</span>])</span>
<span id="cb22-19"><a href="quantifying-data-dissimilarity.html#cb22-19"></a>Range.spe3 &lt;-<span class="st"> </span><span class="kw">max</span>(spe.challenge[, <span class="dv">3</span>]) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(spe.challenge[, <span class="dv">3</span>])</span>
<span id="cb22-20"><a href="quantifying-data-dissimilarity.html#cb22-20"></a></span>
<span id="cb22-21"><a href="quantifying-data-dissimilarity.html#cb22-21"></a><span class="co"># Calculate the Gower dissimilarity</span></span>
<span id="cb22-22"><a href="quantifying-data-dissimilarity.html#cb22-22"></a>(dg.s1s2 &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">/</span>M) <span class="op">*</span><span class="st"> </span>((Spe2.s1s2<span class="op">/</span>Range.spe2) <span class="op">+</span><span class="st"> </span>(Spe3.s1s2<span class="op">/</span>Range.spe3)))</span>
<span id="cb22-23"><a href="quantifying-data-dissimilarity.html#cb22-23"></a>(dg.s1s3 &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">/</span>M) <span class="op">*</span><span class="st"> </span>((Spe2.s1s3<span class="op">/</span>Range.spe2) <span class="op">+</span><span class="st"> </span>(Spe3.s1s3<span class="op">/</span>Range.spe3)))</span>
<span id="cb22-24"><a href="quantifying-data-dissimilarity.html#cb22-24"></a>(dg.s2s3 &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">/</span>M) <span class="op">*</span><span class="st"> </span>((Spe2.s2s3<span class="op">/</span>Range.spe2) <span class="op">+</span><span class="st"> </span>(Spe3.s2s3<span class="op">/</span>Range.spe3)))</span>
<span id="cb22-25"><a href="quantifying-data-dissimilarity.html#cb22-25"></a></span>
<span id="cb22-26"><a href="quantifying-data-dissimilarity.html#cb22-26"></a><span class="co"># Compare your results</span></span>
<span id="cb22-27"><a href="quantifying-data-dissimilarity.html#cb22-27"></a>(spe.db.challenge &lt;-<span class="st"> </span><span class="kw">vegdist</span>(spe.challenge, <span class="dt">method =</span> <span class="st">&quot;gower&quot;</span>))</span></code></pre></div>
<div id="transformations-of-community-composition-data" class="section level2">
<h2><span class="header-section-number">6.1</span> Transformations of community composition data</h2>
<p>Sometimes species/community data may also need to be standardized or
transformed. The decostand() function in vegan provides standardization
and transformation options for community composition data.</p>
<p>Transforming abundance or count data to presence-absence data:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="quantifying-data-dissimilarity.html#cb23-1"></a>spe.pa &lt;-<span class="st"> </span><span class="kw">decostand</span>(spe, <span class="dt">method =</span> <span class="st">&quot;pa&quot;</span>)</span></code></pre></div>
<p>Other transformations can be used to correct for the influence of rare
species, e.g. the Hellinger transformation:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="quantifying-data-dissimilarity.html#cb24-1"></a><span class="co"># Hellinger transformation</span></span>
<span id="cb24-2"><a href="quantifying-data-dissimilarity.html#cb24-2"></a>spe.hel &lt;-<span class="st"> </span><span class="kw">decostand</span>(spe, <span class="dt">method =</span> <span class="st">&quot;hellinger&quot;</span>)  <span class="co">#can also use method=”hell”</span></span>
<span id="cb24-3"><a href="quantifying-data-dissimilarity.html#cb24-3"></a></span>
<span id="cb24-4"><a href="quantifying-data-dissimilarity.html#cb24-4"></a><span class="co"># Chi-square transformation</span></span>
<span id="cb24-5"><a href="quantifying-data-dissimilarity.html#cb24-5"></a>spe.chi &lt;-<span class="st"> </span><span class="kw">decostand</span>(spe, <span class="dt">method =</span> <span class="st">&quot;chi.square&quot;</span>)</span></code></pre></div>
<p><strong>Optional Challenge 2 - Advanced</strong> Produce Hellinger and Chi-square
transformed abundance data for the “spe” data without using decostand().</p>
<p><strong>Optional Challenge 2 - Advanced Solution</strong> &lt;hidden&gt; The Hellinger
transformation is a transformation that down-weights the importance
given to rare species in a sample.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="quantifying-data-dissimilarity.html#cb25-1"></a><span class="co"># Hellinger transformation First calculate the total species</span></span>
<span id="cb25-2"><a href="quantifying-data-dissimilarity.html#cb25-2"></a><span class="co"># abundances by site</span></span>
<span id="cb25-3"><a href="quantifying-data-dissimilarity.html#cb25-3"></a>(<span class="dt">site.totals =</span> <span class="kw">apply</span>(spe, <span class="dv">1</span>, sum))</span>
<span id="cb25-4"><a href="quantifying-data-dissimilarity.html#cb25-4"></a></span>
<span id="cb25-5"><a href="quantifying-data-dissimilarity.html#cb25-5"></a><span class="co"># Scale species abundances by dividing them by site totals</span></span>
<span id="cb25-6"><a href="quantifying-data-dissimilarity.html#cb25-6"></a>(scale.spe &lt;-<span class="st"> </span>spe<span class="op">/</span>site.totals)</span>
<span id="cb25-7"><a href="quantifying-data-dissimilarity.html#cb25-7"></a></span>
<span id="cb25-8"><a href="quantifying-data-dissimilarity.html#cb25-8"></a><span class="co"># Calculate the square root of scaled species abundances</span></span>
<span id="cb25-9"><a href="quantifying-data-dissimilarity.html#cb25-9"></a>(sqrt.scale.spe &lt;-<span class="st"> </span><span class="kw">sqrt</span>(scale.spe))</span>
<span id="cb25-10"><a href="quantifying-data-dissimilarity.html#cb25-10"></a></span>
<span id="cb25-11"><a href="quantifying-data-dissimilarity.html#cb25-11"></a><span class="co"># Compare the results</span></span>
<span id="cb25-12"><a href="quantifying-data-dissimilarity.html#cb25-12"></a>sqrt.scale.spe</span>
<span id="cb25-13"><a href="quantifying-data-dissimilarity.html#cb25-13"></a>spe.hel</span>
<span id="cb25-14"><a href="quantifying-data-dissimilarity.html#cb25-14"></a>sqrt.scale.spe <span class="op">-</span><span class="st"> </span>spe.hel  <span class="co"># or: sqrt.scale.spe/spe.hel</span></span>
<span id="cb25-15"><a href="quantifying-data-dissimilarity.html#cb25-15"></a></span>
<span id="cb25-16"><a href="quantifying-data-dissimilarity.html#cb25-16"></a><span class="co"># Chi-square transformation First calculate the total species</span></span>
<span id="cb25-17"><a href="quantifying-data-dissimilarity.html#cb25-17"></a><span class="co"># abundances by site</span></span>
<span id="cb25-18"><a href="quantifying-data-dissimilarity.html#cb25-18"></a>(site.totals &lt;-<span class="st"> </span><span class="kw">apply</span>(spe, <span class="dv">1</span>, sum))</span>
<span id="cb25-19"><a href="quantifying-data-dissimilarity.html#cb25-19"></a></span>
<span id="cb25-20"><a href="quantifying-data-dissimilarity.html#cb25-20"></a><span class="co"># Then calculate the square root of total species abundances</span></span>
<span id="cb25-21"><a href="quantifying-data-dissimilarity.html#cb25-21"></a>(sqrt.spe.totals &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">apply</span>(spe, <span class="dv">2</span>, sum)))</span>
<span id="cb25-22"><a href="quantifying-data-dissimilarity.html#cb25-22"></a></span>
<span id="cb25-23"><a href="quantifying-data-dissimilarity.html#cb25-23"></a><span class="co"># Scale species abundances by dividing them by the site</span></span>
<span id="cb25-24"><a href="quantifying-data-dissimilarity.html#cb25-24"></a><span class="co"># totals and the species totals</span></span>
<span id="cb25-25"><a href="quantifying-data-dissimilarity.html#cb25-25"></a>scale.spe2 &lt;-<span class="st"> </span>spe</span>
<span id="cb25-26"><a href="quantifying-data-dissimilarity.html#cb25-26"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(spe)) {</span>
<span id="cb25-27"><a href="quantifying-data-dissimilarity.html#cb25-27"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(spe)) {</span>
<span id="cb25-28"><a href="quantifying-data-dissimilarity.html#cb25-28"></a>        (scale.spe2[i, j] =<span class="st"> </span>scale.spe2[i, j]<span class="op">/</span>(site.totals[i] <span class="op">*</span><span class="st"> </span></span>
<span id="cb25-29"><a href="quantifying-data-dissimilarity.html#cb25-29"></a><span class="st">            </span>sqrt.spe.totals[j]))</span>
<span id="cb25-30"><a href="quantifying-data-dissimilarity.html#cb25-30"></a>    }</span>
<span id="cb25-31"><a href="quantifying-data-dissimilarity.html#cb25-31"></a>}</span>
<span id="cb25-32"><a href="quantifying-data-dissimilarity.html#cb25-32"></a></span>
<span id="cb25-33"><a href="quantifying-data-dissimilarity.html#cb25-33"></a><span class="co"># Adjust the scale abundance species by multiplying by the</span></span>
<span id="cb25-34"><a href="quantifying-data-dissimilarity.html#cb25-34"></a><span class="co"># square root of the species matrix total</span></span>
<span id="cb25-35"><a href="quantifying-data-dissimilarity.html#cb25-35"></a>(adjust.scale.spe2 &lt;-<span class="st"> </span>scale.spe2 <span class="op">*</span><span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">sum</span>(<span class="kw">rowSums</span>(spe))))</span>
<span id="cb25-36"><a href="quantifying-data-dissimilarity.html#cb25-36"></a></span>
<span id="cb25-37"><a href="quantifying-data-dissimilarity.html#cb25-37"></a><span class="co"># Compare the results</span></span>
<span id="cb25-38"><a href="quantifying-data-dissimilarity.html#cb25-38"></a>adjust.scale.spe2</span>
<span id="cb25-39"><a href="quantifying-data-dissimilarity.html#cb25-39"></a>spe.chi</span>
<span id="cb25-40"><a href="quantifying-data-dissimilarity.html#cb25-40"></a>adjust.scale.spe2 <span class="op">-</span><span class="st"> </span>spe.chi  <span class="co"># or: adjust.scale.spe2/spe.chi</span></span></code></pre></div>
</div>
</div>
<hr>
<center> 
  <div class="footer">
      All the content of the workshop series is under a <a href="https://creativecommons.org/licenses/by-nc/2.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="data-dissimilarity.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="clustering.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
